<html xmlns:tal="http://axiomstack.com/tale">
  <head>
    <title>User Management for Axiom Stack - Roster</title>
    
    <link rel="stylesheet" type="text/css" href="/static/js/dojox/grid/resources/Grid.css" />
    <link rel="stylesheet" type="text/css" href="/static/js/dojox/grid/resources/tundraGrid.css" />
    <link rel="stylesheet" type="text/css" href="/static/js/dojo/resources/dojo.css" />
    <link rel="stylesheet" type="text/css" href="/static/js/dijit/themes/tundra/tundra.css" />

    <script src="/static/js/dojo/dojo.js" type="text/javascript" djConfig="parseOnLoad: true, isDebug: false"> </script>

    <script type="text/javascript">
      dojo.require("dojox.data.JsonRestStore");
      dojo.require("dojox.grid.DataGrid");
      dojo.require("dijit.layout.ContentPane");
      dojo.require("dijit.layout.BorderContainer");
      dojo.require("dijit.form.Button");
      dojo.require("dijit.form.Form");
      dojo.require("dijit.form.TextBox");
      dojo.require("dojox.form.PasswordValidator");
      dojo.require("dojo.parser");
    
    dojo.addOnLoad(function()
        {
    var subrow = [
    { field: 'first_name', width: '100px', name: 'First Name' },
    { field: 'last_name', width: '150px', name: 'Last Name' },
    { field: 'username', width: '200px', name: 'Username' },
    { field: 'password', width: '200px', name: 'Password' },
    { field: 'email', width: '200px', name: 'Email Address' }
    ];
 
    var view = {
    rows: [ subrow ]
    };
 
    var structure = [
    view
    ];

    var jsonStore = new dojox.data.JsonRestStore({target: "users_json", id: 'username'});

          var grid = new dojox.grid.DataGrid({query: { username: '*' },
	  autoHeight: true,
	  autoWidth: true,
	  store: jsonStore,
	  structure: structure,
	  noDataMessage: 'No data?',
	  region: 'center',
	  rowsPerPage: 30,
	  clientSort: false}, 'grid');


	  dijit.byId('grid_pane').attr({content:grid});

	  //request = store.fetch({onComplete: itemsLoaded, start: 0, count: 10});
	  grid.startup();

	  dojo.connect(
	  dojo.query('button')[0],
	  'onclick',
	  grid,
	  function(evt) {
	  this.update();
	  });
        }
      ); 

    </script>
  </head>
  <body class="tundra">
    <div dojoType="dijit.layout.BorderContainer" gutters="false" id="content_pane" style="width:100%;height:500px">
      <div dojoType="dijit.layout.ContentPane" id="content_top" region="top" styles="height:75px;">
	<button dojoType="dijit.form.Button">Refresh</button>
      </div>
      <div dojoType="dijit.layout.ContentPane" id="control_pane" region="left" style="width:20%;height:400px;">
	<h2>Add Users</h2>
	<form dojoType="dijit.form.Form" id="add_user" action="" method="post">
	  <fieldset>
	    <label for="username">Username:</label> <input dojoType="dijit.form.TextBox" type="text" name="username" id="username" />
	  </fieldset>
	  <fieldset>
	    <label for="password">Password:</label> <input dojoType="dijit.form.TextBox" type="password" name="password" id="password" />
	  </fieldset>
	  <fieldset>
	    <label for="first_name">First Name:</label> <input dojoType="dijit.form.TextBox" type="text" name="first_name" id="first_name" />
	  </fieldset>
	  <fieldset>
	    <label for="last_name">Last Name:</label> <input dojoType="dijit.form.TextBox" type="text" name="last_name" id="last_name" />
	  </fieldset>
	  <fieldset>
	    <label for="email">Email:</label> <input dojoType="dijit.form.TextBox" type="text" name="email" id="email" />
	  </fieldset>
	  <fieldset>
	    <button dojoType="dijit.form.Button" onClick="return true;">Add User</button>
	  </fieldset>
	</form>
      </div>
      <div dojoType="dijit.layout.ContentPane" region="center" style="width:80%;height:400px;">
	<h2>Content</h2>
	<div dojoType="dijit.layout.ContentPane" id="grid_pane">
	</div>
      </div>
      <div dojoType="dijit.layout.ContentPane" id="paging" region="bottom">
	<button dojoType="dijit.form.Button">&lt;</button>
	<button dojoType="dijit.form.Button">&gt;</button>
      </div>
    </div>
  </body>
</html>